"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const getServerBuildAvailability_1 = require("./getServerBuildAvailability");
const types_1 = require("../types");
const core_1 = require("@edgio/core");
/**
 * Returns the render mode for the current build.
 * @param nextConfig
 */
function getRenderMode(nextConfig) {
    var _a;
    const edgioConfig = (0, core_1.getConfig)();
    if ((_a = edgioConfig === null || edgioConfig === void 0 ? void 0 : edgioConfig.next) === null || _a === void 0 ? void 0 : _a.forceServerBuild)
        return types_1.RENDER_MODES.server;
    const { useServerBuild } = (0, getServerBuildAvailability_1.getServerBuildAvailability)({ config: nextConfig });
    return useServerBuild ? types_1.RENDER_MODES.server : types_1.RENDER_MODES.serverless;
}
exports.default = getRenderMode;
