"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const semver_1 = require("semver");
/**
 * Returns the value of NODE_OPTIONS environment variable
 * with params needed to run older Next.js versions.
 * @returns
 */
function getNodeOptions(nextVersion) {
    var _a, _b;
    // We need to add openssl-legacy-provider for Next.js < 12 to NODE_OPTIONS
    // only for Node 17 and newer versions otherwise it will fail
    // with error: "node: --openssl-legacy-provider is not allowed in NODE_OPTIONS"
    if ((0, semver_1.satisfies)(nextVersion, '< 12.0.0') && (0, semver_1.satisfies)(process.version, '>= 17.0.0')) {
        return `--openssl-legacy-provider ${((_a = process === null || process === void 0 ? void 0 : process.env) === null || _a === void 0 ? void 0 : _a.NODE_OPTIONS) || ''}`;
    }
    return ((_b = process === null || process === void 0 ? void 0 : process.env) === null || _b === void 0 ? void 0 : _b.NODE_OPTIONS) || '';
}
exports.default = getNodeOptions;
