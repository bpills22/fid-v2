/// <reference types="node" />
/// <reference types="node" />
import Request, { RequestHeaders } from '../runtime/Request';
import { InvokeAction, InvokeSource } from '../constants';
import { IncomingMessage } from 'http';
export interface LambdaRequestOptions {
    /**
     * Either pass URL, or mock only certain values.
     *
     * Implemented this way as we use only pathname + query as request.url,
     * dont need hostname, protocol in a lot of cases -> such as testing,
     * and traditional URL can't be built without it.
     */
    url: {
        pathname: URL['pathname'];
        protocol?: URL['protocol'];
        search?: URL['search'];
        host?: URL['host'];
        port?: URL['port'];
    };
    /**
     * Represents the unmodified URL path as received from downstream.
     */
    rawUrl: string;
    headers?: RequestHeaders;
    body?: string | Buffer;
    rawBody?: Buffer;
    method?: string;
    httpVersion?: string;
    invokeAction?: InvokeAction;
    invokeSource?: InvokeSource;
}
/**
 * Data holder for lambda request.

 * Useful for cases when request needs to be created for:
 *    - lambda invocation / reqResMapper
 *    - findMatchingRules invocation
 *    - fiddle RequestContext invocation
 *    - tests (mainly ones invoking RequestContext directly)
 */
export default class LambdaRequest implements Request {
    url: string;
    path: string;
    headers: RequestHeaders;
    rawHeaders: string[];
    query: {
        [key: string]: string | string[] | undefined;
    };
    method: string;
    protocol: string;
    secure: boolean;
    socket: {
        remoteAddress: string;
        encrypted: boolean;
    };
    connection: {
        encrypted: boolean;
    };
    httpVersion: string;
    port: string;
    params?: {
        [key: string]: string | string[];
    } | undefined;
    rawUrl: string;
    _rawBody: Buffer;
    readonly invokeAction?: InvokeAction;
    readonly invokeSource?: InvokeSource;
    private options;
    constructor(options: LambdaRequestOptions);
    static fromNodeRequest(request: IncomingMessage): Promise<LambdaRequest>;
    /**
     * Returns a clone of the original request, before any properties were altered.
     */
    cloneOriginal(): LambdaRequest;
    setHeader(name: string, value: unknown): void;
    getHeader(name: string): unknown;
    getHeaders(): RequestHeaders;
    removeHeader(name: string): void;
    get body(): string;
    set body(value: string);
    get rawBody(): Buffer;
    set rawBody(value: Buffer);
}
